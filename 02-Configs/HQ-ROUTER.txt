version 15.1
service timestamps log datetime msec
service timestamps debug datetime msec
service password-encryption
!
hostname HQ-ROUTER
!
!
!
enable secret 5 $1$mERr$3HhIgMGBA/9qNmgzccuxv0
!
!
!
!
!
!
no ip cef
no ipv6 cef
!
!
!
username kareem-rabie privilege 15 secret 5 $1$mERr$p71l5xhCTlTZsP7l2yAz90
!
!
license udi pid CISCO2811/K9 sn FTX10170P2Q-
!
!
!
!
!
!
!
!
!
ip ssh version 2
ip domain-name corp.local
!
!
spanning-tree mode pvst
!
!
!
!
!
!
interface FastEthernet0/0
 ip address 192.168.200.1 255.255.255.252
 ip ospf authentication message-digest
 ip ospf message-digest-key 1 md5 secure-key
 duplex auto
 speed auto
!
interface FastEthernet0/1
 no ip address
 ip nat inside
 duplex auto
 speed auto
!
interface FastEthernet0/1.10
 encapsulation dot1Q 10
 ip address 192.168.10.1 255.255.255.0
 ip nat inside
!
interface FastEthernet0/1.20
 encapsulation dot1Q 20
 ip address 192.168.20.1 255.255.255.0
 ip access-group users-in in
 ip nat inside
!
interface FastEthernet0/1.30
 encapsulation dot1Q 30
 ip address 192.168.30.1 255.255.255.0
 ip nat inside
!
interface FastEthernet0/1.40
 encapsulation dot1Q 40
 ip address 192.168.40.1 255.255.255.0
 ip access-group guest-in in
 ip nat inside
!
interface FastEthernet0/1.99
 encapsulation dot1Q 99
 ip address 192.168.99.1 255.255.255.0
!
interface Serial0/2/0
 ip address 203.0.113.2 255.255.255.252
 ip access-group internet-in in
 ip nat outside
 clock rate 2000000
!
interface Serial0/2/1
 ip address 172.16.100.1 255.255.255.252
 ip ospf authentication message-digest
 ip ospf message-digest-key 1 md5 secure-key
 ip ospf priority 1
 ip nat inside
 clock rate 2000000
!
interface Vlan1
 no ip address
 shutdown
!
router ospf 10
 router-id 1.1.1.1
 log-adjacency-changes
 passive-interface default
 no passive-interface FastEthernet0/0
 no passive-interface Serial0/2/0
 no passive-interface Serial0/2/1
 network 203.0.113.0 0.0.0.3 area 0
 network 192.168.0.0 0.0.255.255 area 0
 network 172.16.100.0 0.0.0.3 area 0
 network 192.168.200.0 0.0.0.3 area 0
 network 10.0.0.0 0.0.0.255 area 0
 default-information originate
!
ip nat inside source list 101 interface Serial0/2/0 overload
ip nat inside source static 10.0.0.10 213.0.113.10 
ip nat inside source static 10.0.0.20 213.0.113.20 
ip classless
ip route 0.0.0.0 0.0.0.0 203.0.113.1 
!
ip flow-export version 9
!
!
access-list 101 permit ip 192.168.10.0 0.0.0.255 any
access-list 101 permit ip 192.168.20.0 0.0.0.255 any
access-list 101 permit ip 172.16.50.0 0.0.0.255 any
access-list 101 permit ip 172.16.60.0 0.0.0.255 any
access-list 101 permit ip 192.168.40.0 0.0.0.255 any
ip access-list standard vty-access
 permit 192.168.10.0 0.0.0.255
 permit 172.16.50.0 0.0.0.255
 permit 192.168.99.0 0.0.0.255
 deny any
ip access-list extended guest-in
 permit tcp 192.168.40.0 0.0.0.255 172.16.0.0 0.0.255.255 established
 permit tcp 192.168.40.0 0.0.0.255 192.168.0.0 0.0.255.255 established
 permit icmp 192.168.40.0 0.0.0.255 172.16.0.0 0.0.255.255 echo-reply
 permit icmp 192.168.40.0 0.0.0.255 192.168.0.0 0.0.255.255 echo-reply
 permit icmp 192.168.40.0 0.0.0.255 203.0.113.0 0.0.0.255 echo-reply
 permit tcp 192.168.40.0 0.0.0.255 any eq www
 permit tcp 192.168.40.0 0.0.0.255 any eq 443
 permit udp 192.168.40.0 0.0.0.255 any eq domain
 deny ip 192.168.40.0 0.0.0.255 10.0.0.0 0.0.0.255
 deny ip 192.168.40.0 0.0.0.255 172.16.0.0 0.0.255.255
 deny ip 192.168.40.0 0.0.0.255 192.168.0.0 0.0.255.255
 deny ip any any
ip access-list extended internet-in
 permit tcp any host 10.0.0.10 eq 443
 permit tcp any host 10.0.0.10 eq www
 permit udp any host 10.0.0.20 eq domain
 permit icmp any any echo-reply
 permit tcp any any established
 deny ip any any
ip access-list extended users-in
 permit tcp 192.168.20.0 0.0.0.255 any eq www
 permit tcp 192.168.20.0 0.0.0.255 any eq 443
 permit udp 192.168.20.0 0.0.0.255 any eq domain
 permit icmp any any echo-reply
 permit ip 192.168.20.0 0.0.0.255 host 192.168.30.2
 permit tcp any 192.168.20.0 0.0.0.255 established
 deny ip 192.168.20.0 0.0.0.255 192.168.0.0 0.0.255.255
 deny ip 192.168.20.0 0.0.0.255 172.16.0.0 0.0.255.255
 deny ip 192.168.20.0 0.0.0.255 10.0.0.0 0.0.0.255
 deny ip any any
!
!
!
!
!
line con 0
 password 7 08701E1D
 login
!
line aux 0
!
line vty 0 4
 access-class vty-access in
 login local
 transport input ssh
line vty 5 15
 access-class vty-access in
 login local
 transport input ssh
!
!
!
end